(o=>{"use strict";const a=tbLocalScript.addons.tile,s="no"===a.fluid_tiles?"fixed":a.tiles_base||25,t=!0===o.is_builder_active,e={init(t){const i=o.selectWithParent("module-tile",t);for(let t=i.length-1;-1<t;--t)this.loadCss(i[t]),this.event(i[t]),this.run(i[t])},loadCss(s){const l={"flip-horizontal":"","flip-vertical":"","tile-icon":"","action-button":"",button:"types/",map:"types/"};t&&(l.active=""),o.isTouch&&(l["flip-back-button"]="");for(let e in l){let t="bt_"+e.replace("-","_"),i=!1;if("flip-horizontal"===e||"flip-vertical"===e)i=s.classList.contains(e);else if("active"===e)i=!0;else{let t="flip-back-button"===e?"tile-flip-back-button":"button"===e||"map"===e?"tile-type-"+e:e;i=void 0!==s.tfClass(t)[0]}!0===i&&o.loadCss(a.url+"modules/"+l[e]+e,t,a.ver)}},run(i){const e=i.parentNode;if(t&&!e.classList.contains("tb-column-inner")){let t=e.closest(".tiles-wrap");t||((t=e.closest(".tb_holder")).className+=" tiles-wrap tiles-ready tiles-base-"+s+" tf_w tf_box"),e.classList.contains("tb_holder")||(e.classList.remove("size-square-large","size-square-small","size-landscape","size-portrait"),e.classList.add("module-tile",i.className.match(/(size-\S*)/)[1]))}else e.classList.contains("tiles-wrap")||e.classList.add("tiles-wrap","tiles-base-"+s,"tiles-ready","tf_w")},event(l){if(l.classList.contains("has-flip")){const t=this,a=1e3*l.dataset.autoFlip;let i=!1,e=null,s=null;if(0<a){let t=!1;(s=()=>{e=setTimeout(()=>{!1===t&&!1===i?(t=!0,this.flip(l,null,()=>{(t=!1)===i&&s()})):s()},a)})()}o.isTouch?l.classList.contains("tile-type-front-button")&&!l.querySelector(".tile-front a:not(.tile-flip-back-button)")&&l.tfOn("pointerdown",function(){t.flip(this,"back")}):l.tfOn("mouseenter",function(){!1===i&&(i=!0,e&&clearTimeout(e),t.flip(this,"back"),this.tfOn("mouseleave",function(){t.flip(this,"front"),i=!1,s&&s()},{passive:!0,once:!0}))},{passive:!0})}},flip(t,i,e){if(t){const s=t.tfClass("tile-back")[0];if(s){const l=s.classList,a=t.dataset.inEffect,o=t.dataset.outEffect,n="flip-horizontal"===a||"flip-vertical"===a?"transitionend":"animationend";i=i||(t.classList.contains("builder-tile-flip")?"front":"back"),t.classList.contains("bt_stop_flip")||(s.removeAttribute("style"),t.classList.toggle("builder-tile-flip","back"===i),s.tfOn(n,()=>{t.classList.toggle("builder-tile-flipped","back"===i),l.remove("wow","animated"),e&&e()},{passive:!0,once:!0}),l.add("wow","animated"),a&&("back"===i?(s.style.visibility="visible",s.style.animationName=a,""!==o&&l.remove(o),l.add(a)):(s.style.visibility="",s.style.animationName=o,l.remove(a),""!==o&&l.add(o))))}}}};o.on("builder_load_module_partial",(t,i)=>{!0===i&&!t.classList.contains("module-tile")||e.init(t)}).animateCss(),t&&o.on("builder_tiles_flip",(t,i)=>{e.flip(t,i)}),document.body.tfOn("click",t=>{const i=t.target.closest(".tile-flip-back-button");i&&(t.preventDefault(),t.stopPropagation(),e.flip(i.closest(".module-tile")))})})(Themify);