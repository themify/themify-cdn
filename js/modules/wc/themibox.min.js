(($,l,a)=>{"use strict";let c,h,r,d=a.createElement("div"),p=a.createElement("div"),f=d.classList,m=p.classList;const y=a.createElement("div"),g=themify_vars.theme_v,u=themifyScript.wc_css_url,_=t=>{27===t.keyCode&&x(t)},x=t=>{"keyup"!==t.type&&t.preventDefault(),c&&(y.tfOn("transitionend",function(){const t=()=>{f.add("tf_hide"),p.innerHTML="",l.trigger("themiboxclosed"),a.body.classList.remove("post-lightbox"),a.tfOff("keyup",_,{passive:!0}),c=h=r=null};if(a.body.classList.remove("post-lightbox"),f.contains("lightbox-message"))f.remove("lightbox-message"),d.tfOn("transitionend",function(){this.style.top="",t()},{passive:!0,once:!0}).style.top="150%";else{f.add("lightbox_closing","post-lightbox-prepare");const e=r.getBoundingClientRect();d.tfOn("transitionend",function(){h.style.display="",m.remove("tf_hidden"),p.style.transition="",this.tfOn("transitionend",function(){this.classList.remove("post-lightbox-prepare","lightbox_closing"),t()},{passive:!0,once:!0}).style.top=e.top+e.height/2+"px",this.style.left=e.left+e.width/2+"px"},{passive:!0,once:!0}),p.style.transition="none",m.add("tf_hidden");for(let t=p.children,e=t.length-1;-1<e;--e)h!==t[e]&&t[e].remove();d.style.width=e.width+"px",d.style.height=e.height+"px"}this.classList.add("tf_hide")},{passive:!0,once:!0}),y.classList.add("tf_opacity"))},s=function(t){if(t.preventDefault(),c)return!1;if(c=this,l.wc(!0),r=c.closest(".product,.slide-inner-wrap,.type-product")){const n=r.querySelector(".product-image,.post-image");r=n||r.tfTag("img")[0]}if(!r)return!1;f.add("woocommerce","woo_qty_btn","post-lightbox-prepare","tf_hide");let e=c.href,i="IMG"===r.tagName?r:r.tfTag("img")[0];themify_vars.wc_js||(e=l.updateQueryString("load_wc","1",e)),i=(i=i?i.src:c.dataset.image)||themifyScript.placeholder,(h=new Image).src=i;const s=r.getBoundingClientRect(),o=l.fetch("","html",{method:"GET"},l.updateQueryString("post_in_lightbox","1",e));d.style.width=s.width+"px",d.style.height=s.height+"px",d.style.top=s.top+s.height/2+"px",d.style.left=s.left+s.width/2+"px",Promise.all([h.decode(),(()=>{let t=a.tfId("themify_concate-css");t=t&&t.nextElementSibling;const i=themifyScript.wc_gal,s=[];if(a.body.classList.contains("product-single")||s.push(l.loadCss(u+"single/product","theme_single_product",g,t)),s.push(l.loadCss(u+"lightbox","theme_lightbox",g)),0===a.tfClass("woocommerce-breadcrumb").length&&s.push(l.loadCss(u+"breadcrumb","theme_breadcrumb",g,t)),i)for(let e in i){let t=!1;"flexslider"===e||"zoom"===e?t=void 0!==$[e]:"photoswipe"===e?t="undefined"!=typeof PhotoSwipe:"photoswipe-ui-default"===e&&(t="undefined"!=typeof PhotoSwipeUI_Default),s.push(l.loadJs(i[e].s,t,i[e].v))}return Promise.all(s)})()]).then(()=>{p.appendChild(h),y.classList.remove("tf_hide"),f.remove("tf_hide"),setTimeout(()=>{d.tfOn("transitionend",()=>{a.body.classList.add("post-lightbox"),y.classList.remove("tf_opacity"),m.add("post-lightbox-flip-infinite"),o.then(t=>{l.on("single_slider_loaded",()=>{setTimeout(()=>{p.tfOn("animationiteration",function(){this.classList.remove("post-lightbox-flip-infinite"),d.tfOn("transitionend",()=>{if(d=e,p=i,m=p.classList,f=d.classList,d.style.top=e.style.left="",f.remove("tf_opacity"),d.previousSibling.remove(),d.style.transition="none",d.style.width=d.style.height=p.style.transition="","function"==typeof ThemifyShoppeAjaxCart){const t=p.querySelector("form.cart");t&&t.tfOn("submit",ThemifyShoppeAjaxCart)}e=i=null,m.remove("tf_opacity"),a.tfOn("keyup",_,{passive:!0}),setTimeout(()=>{d.style.transition="",d.lastElementChild.tfOn("click",x,{once:!0})},10)},{once:!0,passive:!0}).style.transition="",p.style.transition="none",m.add("tf_opacity"),f.remove("post-lightbox-prepare"),d.style.width=e.clientWidth+"px",d.style.height=e.clientHeight+"px"},{passive:!0,once:!0})},15)},!0);let e=d.cloneNode(!0),i=e.firstChild,s=(i.style.transition=e.style.transition="none",i.classList.remove("post-lightbox-flip-infinite"),e.classList.remove("post-lightbox-prepare"),e.classList.add("tf_opacity"),e.style.top=e.style.left="-1000vh",e.style.width=e.style.height="",(h=i.tfTag("img")[0]).style.display="none",i.appendChild(t),d.after(e),l.fonts(i),a.tfClass("pswp")[0]);if(s||(s=i.tfClass("pswp")[0])&&a.body.prepend(s),i.tfClass("share-wrap")[0]){let t=a.tfId("themify_concate-css");t=t&&t.nextElementSibling,l.loadCss(u+"social-share","theme_social_share",g,t)}l.trigger("themiboxloaded",i),l.wc(!0)})},{once:!0,passive:!0}),d.style.height="",d.style.width=(180<s.width?180:s.width)+"px",d.style.top=d.style.left=""},15)})};l.on("themify_theme_themibox_run",t=>{const e=a.createDocumentFragment(),i=a.createElement("a");d.id="post-lightbox-wrap",d.className="tf_scrollbar tf_box tf_hide",y.id="pattern",y.tfOn("click",x).className="tf_opacity tf_hide tf_w tf_h",p.id="post-lightbox-container",p.className="tf_box tf_w tf_h tf_overflow",i.className="close-lightbox tf_close",i.href="#",d.append(p,i),e.append(d,y),l.body.on("click",".themify-lightbox",s).on("added_to_cart",()=>{c&&(f.add("lightbox-message"),d.tfOn("transitionend",function(){this.style.padding="",p.appendChild((()=>{const t=a.createElement("div"),e=a.createElement("h3"),i=a.createElement("a"),s=a.createElement("a");return t.className="tf_textc lightbox-added",e.textContent=themifyScript.lng.add_to,i.className="button outline",i.textContent=themifyScript.lng.keep_shop,i.tfOn("click",x,{once:!0}).href="#",s.href=themifyScript.checkout_url,s.className="button checkout",s.textContent=themifyScript.lng.checkout,t.append(e,i,s),a.body.classList.contains("woocommerce-cart")&&l.on("themiboxclosed",()=>{window.location.reload()},!0),t})()),this.tfOn("transitionend",function(){this.style.maxHeight=""},{passive:!0,once:!0}),this.style.maxHeight="100%"},{passive:!0,once:!0}),p.innerHTML="",d.style.padding=d.style.maxHeight="0px")})[0].appendChild(e),t.click()},!0)})(jQuery,Themify,document);