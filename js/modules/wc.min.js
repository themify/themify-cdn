(($,u,_,t,f)=>{"use strict";if(_.body.classList.contains("slide-cart")){const a=_.querySelectorAll('a[href="#slide-cart"]');0<a.length&&u.sideMenu(a,{close:"#cart-icon-close",beforeShow(){u.loadCss(t.theme_url+"/styles/wc/modules/basket",null,t.theme_v)}})}let c=!1;const e=_.querySelectorAll("#headerwrap .icon-shopping-cart"),m=()=>{for(let t=e.length-1;-1<t;--t)e[t].classList.remove("tf_loader")};if(u.body.on("added_to_cart removed_from_cart",function(t){const e=$(".cart-icon");if(e.hasClass("empty-cart")&&("added_to_cart"===t.type?e.removeClass("empty-cart"):parseInt($(".cart-icon-link span").text())<=0&&e.addClass("empty-cart")),"added_to_cart"===t.type&&(m(),!1===c)&&f.ajaxCartSeconds){c=!0;let o=parseInt(f.ajaxCartSeconds);const a=_.querySelector(u.isTouch?"#mobile-menu .cart-icon-link":".header-icons .cart-icon-link");if(null!==a){const r=a.getAttribute("href"),s=_.tfId(r.replace("#",""));null!==s&&(u.on("sidemenushow",(t,e,a)=>{r===t&&setTimeout(()=>{$(s).is(":hover")?s.tfOn("mouseleave",function(){a.hidePanel(),_.body.classList.remove("tf_auto_cart_open")},{once:!0,passive:!0}):(a.hidePanel(),_.body.classList.remove("tf_auto_cart_open")),c=!1},o)},!0),_.body.classList.add("tf_auto_cart_open"),setTimeout(()=>{a.click()},100))}}}).on("adding_to_cart",()=>{for(let t=e.length-1;-1<t;--t)e[t].classList.add("tf_loader")}),"undefined"!=typeof wc_add_to_cart_params&&_.body.tfOn("click",t=>{const e=t.target?t.target.closest(".remove_from_cart_button"):null;e&&(t.preventDefault(),e.classList.remove("tf_close"),e.classList.add("tf_loader"))}),f.ajaxSingleCart){const o=_.querySelector("form.cart");o&&o.tfOn("submit",async function(t){if(!(this.classList.contains("auction_form")||-1<window.location.search.indexOf("switch-subscription")||null!==this.closest(".product-type-external"))){t.preventDefault();const e=new FormData(this),a=this.tfClass("single_add_to_cart_button")[0],o=a?a.classList:null,r=this.querySelector('[name="add-to-cart"]');if(!(!r||o&&o.contains("loading"))){"INPUT"!==r.tagName&&e.set("add-to-cart",r.value),o&&(o.remove("added"),o.add("loading")),u.body.triggerHandler("adding_to_cart",[this.querySelector('[type="submit"]'),e]);try{const s=await u.fetch(e,null,null,woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","theme_add_to_cart"));if(!s)throw"error";if(!s.fragments&&!s.success)throw s.data;const c=s.fragments,n=s.cart_hash;if(c){const i=Object.keys(c);let a=null;for(let e=i.length-1;-1<e;e--)for(let t=(a=_.querySelectorAll(i[e])).length-1;-1<t;t--)a[t].className+=" updating",a[t].outerHTML=c[i[e]]}o&&o.add("added"),u.body.triggerHandler("added_to_cart",[c,n]),f.redirect&&(window.location.href=f.redirect)}catch(a){const l=_.createDocumentFragment(),d=_.createElement("div");await u.loadJs(u.url+"js/admin/notification",!!window.TF_Notification);for(let e=0,t=(a=Array.isArray(a)?a:[a]).length;e<t;++e){let t=_.createElement("template");t.innerHTML=a[e],l.appendChild(t.content)}d.className="wc_errors",d.appendChild(l),await TF_Notification.showHide("error",d,3e3)}o&&o.remove("loading"),m()}}})}})(jQuery,Themify,document,themify_vars,themifyScript);