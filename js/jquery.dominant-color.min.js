/*14-01-2014*/
!function(j){var i=function(){return document.createElement("canvas").getContext("2d")},p=function(b,h){var g=new Image,f=b.src||b;"data:"!==f.substring(0,5)&&(g.crossOrigin="Anonymous"),g.onload=function(){var c=i();c.drawImage(g,0,0);var d=c.getImageData(0,0,g.width,g.height);h&&h(d.data)},g.src=f},o=function(b){return["rgb(",b,")"].join("")},n=function(b){return b.map(function(c){return o(c.name)})},m=5,l=10,k={};k.colors=function(d,c,e){p(d,function(g){for(var t=g.length,r={},q="",h=[],f={dominant:{name:"",count:0},palette:Array.apply(null,Array(e||l)).map(Boolean).map(function(){return{name:"0,0,0",count:0}})},b=0;t>b;){if(h[0]=g[b],h[1]=g[b+1],h[2]=g[b+2],q=h.join(","),r[q]=q in r?r[q]+1:1,"0,0,0"!==q&&"255,255,255"!==q){var s=r[q];s>f.dominant.count?(f.dominant.name=q,f.dominant.count=s):f.palette.some(function(u){return s>u.count?(u.name=q,u.count=s,!0):void 0})}b+=4*m}c&&c({dominant:o(f.dominant.name),palette:n(f.palette)})})},j.RGBaster=j.RGBaster||k}(window);