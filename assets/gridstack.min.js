!function($,t){const c={isIntercepted:function(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)},sort:function(t,e,i){var o;return i||(o=t.map(function(t){return t.x+t.width}),i=Math.max.apply(Math,o)),-1===e?c.sortBy(t,function(t){return-(t.x+t.y*i)}):c.sortBy(t,function(t){return t.x+t.y*i})},createStylesheet:function(t,e){var i=document.createElement("style");return i.setAttribute("data-gs-style-id",t),i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),(e=e||document.getElementsByTagName("head")[0]).insertBefore(i,e.firstChild),i.sheet},removeStylesheet:function(t){$("style[data-gs-style-id="+t+"]").remove()},insertCSSRule:function(t,e,i,o){"function"==typeof t.insertRule?t.insertRule(e+"{"+i+"}",o):"function"==typeof t.addRule&&t.addRule(e,i,o)},toBool:function(t){return"boolean"==typeof t?t:"string"==typeof t?!(""===(t=t.toLowerCase())||"no"===t||"false"===t||"0"===t):Boolean(t)},_collisionNodeCheck:function(t){return t!==this.node&&c.isIntercepted(t,this.nn)},_didCollide:function(t){return c.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},t)},_isAddNodeIntercepted:function(t){return c.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},t)},parseHeight:function(t){var e="px";if(t&&"string"==typeof t){var i=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);if(!i)throw new Error("Invalid height");e=i[2]||"px",t=parseFloat(i[1])}return{height:t,unit:e}},without:function(t,e){e=t.indexOf(e);return-1!==e&&(t=t.slice(0)).splice(e,1),t},sortBy:function(t,i){return t.slice(0).sort(function(t,e){t=i(t),e=i(e);return e===t?0:e<t?1:-1})},defaults:function(i){return[].slice.call(arguments,1).forEach(function(t){for(var e in t)!{}.hasOwnProperty.call(t,e)||{}.hasOwnProperty.call(i,e)&&void 0!==i[e]||(i[e]=t[e])}),i},clone:function(t){return $.extend({},t)},throttle:function(t,e){var i=!1;return function(){i||(t.apply(this,arguments),i=!0,setTimeout(function(){i=!1},e))}},removePositioningStyles:function(t){t=t[0].style;t.position&&t.removeProperty("position"),t.left&&t.removeProperty("left"),t.top&&t.removeProperty("top"),t.width&&t.removeProperty("width"),t.height&&t.removeProperty("height")},getScrollParent:function(t){t=null===t?null:t.scrollHeight>t.clientHeight?t:c.getScrollParent(t.parentNode);return t},updateScrollPosition:function(t,e,i){var o,s,n,a,r=t.getBoundingClientRect(),d=window.innerHeight||document.documentElement.clientHeight;(r.top<0||r.bottom>d)&&(o=r.bottom-d,s=r.top,null!==(n=c.getScrollParent(t)))&&(a=n.scrollTop,r.top<0&&i<0?t.offsetHeight>d?n.scrollTop+=i:n.scrollTop+=Math.abs(s)>Math.abs(i)?i:s:0<i&&(t.offsetHeight>d?n.scrollTop+=i:n.scrollTop+=i<o?i:o),e.position.top+=n.scrollTop-a)}};function h(t){this.grid=t}h.registeredPlugins=[],h.registerPlugin=function(t){h.registeredPlugins.push(t)},h.prototype.resizable=function(t,e){return this},h.prototype.draggable=function(t,e){return this},h.prototype.droppable=function(t,e){return this},h.prototype.isDroppable=function(t){return!1},h.prototype.on=function(t,e,i){return this};let n=0;const l=function(t,e,i,o,s){this.column=t||12,this.float=i||!1,this.maxRow=o||0,this.nodes=s||[],this.onchange=e||function(){},this._addedNodes=[],this._removedNodes=[],this._batchMode=!1};l.prototype.batchUpdate=function(){this._batchMode||(this._batchMode=!0,this._prevFloat=this.float,this.float=!0)},l.prototype.commit=function(){this._batchMode&&(this._batchMode=!1,this.float=this._prevFloat,delete this._prevFloat,this._packNodes(),this._notify())},l.prototype.getNodeDataByDOMEl=function(e){return this.nodes.find(function(t){return e===t.el})},l.prototype._fixCollisions=function(t){this._sortNodes(-1);var e=t,i=Boolean(this.nodes.find(function(t){return t.locked}));this.float||i||(e={x:0,y:t.y,width:this.column,height:t.height});while(1){var o=this.nodes.find(c._collisionNodeCheck,{node:t,nn:e});if(!o)return;if(!(o.locked?this.moveNode(t,t.x,o.y+o.height,t.width,t.height,!0):this.moveNode(o,o.x,t.y+t.height,o.width,o.height,!0)))return}},l.prototype.isAreaEmpty=function(t,e,i,o){var s={x:t||0,y:e||0,width:i||1,height:o||1};return!this.nodes.find(function(t){return c.isIntercepted(t,s)})},l.prototype._sortNodes=function(t){this.nodes=c.sort(this.nodes,t,this.column)},l.prototype._packNodes=function(){this._sortNodes(),this.float?this.nodes.forEach(function(t,e){if(!t._updating&&void 0!==t._packY&&t.y!==t._packY){var i=t.y;while(i>=t._packY)this.nodes.slice(0,e).find(c._didCollide,{n:t,newY:i})||(t._dirty=!0,t.y=i),--i}},this):this.nodes.forEach(function(t,e){if(!t.locked)while(0<t.y){var i=t.y-1,o=0===e;if(!(o=0<e?void 0===this.nodes.slice(0,e).find(c._didCollide,{n:t,newY:i}):o))break;t._dirty=t.y!==i,t.y=i}},this)},l.prototype._prepareNode=function(t,e){void 0!==(t=t||{}).x&&void 0!==t.y&&null!==t.x&&null!==t.y||(t.autoPosition=!0);var i={width:1,height:1,x:0,y:0};return(t=c.defaults(t,i)).x=parseInt(t.x),t.y=parseInt(t.y),t.width=parseInt(t.width),t.height=parseInt(t.height),t.autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,Number.isNaN(t.x)&&(t.x=i.x,t.autoPosition=!0),Number.isNaN(t.y)&&(t.y=i.y,t.autoPosition=!0),Number.isNaN(t.width)&&(t.width=i.width),Number.isNaN(t.height)&&(t.height=i.height),void 0!==t.maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),void 0!==t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),void 0!==t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),void 0!==t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t.width>this.column?t.width=this.column:t.width<1&&(t.width=1),this.maxRow&&t.height>this.maxRow?t.height=this.maxRow:t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.width>this.column&&(e?t.width=this.column-t.x:t.x=this.column-t.width),this.maxRow&&t.y+t.height>this.maxRow&&(e?t.height=this.maxRow-t.y:t.y=this.maxRow-t.height),t},l.prototype._notify=function(){var t,e;this._batchMode||((t=[].slice.call(arguments,0))[0]=void 0===t[0]?[]:Array.isArray(t[0])?t[0]:[t[0]],t[1]=void 0===t[1]||t[1],e=t[0].concat(this.getDirtyNodes()),this.onchange(e,t[1]))},l.prototype.cleanNodes=function(){this._batchMode||this.nodes.forEach(function(t){delete t._dirty})},l.prototype.getDirtyNodes=function(t){var e;return t?(e=[],this.nodes.forEach(function(t){t._dirty&&(t.y===t._origY&&t.x===t._origX&&t.width===t._origW&&t.height===t._origH?delete t._dirty:e.push(t))}),e):this.nodes.filter(function(t){return t._dirty})},l.prototype.addNode=function(t,e){if((t=this._prepareNode(t))._id=t._id||++n,t.autoPosition){this._sortNodes();for(var i=0;;++i){var o=i%this.column,s=Math.floor(i/this.column);if(!(o+t.width>this.column)&&!this.nodes.find(c._isAddNodeIntercepted,{x:o,y:s,node:t})){t.x=o,t.y=s,delete t.autoPosition;break}}}return this.nodes.push(t),e&&this._addedNodes.push(t),this._fixCollisions(t),this._packNodes(),this._notify(),t},l.prototype.removeNode=function(t,e){e=void 0===e||e,this._removedNodes.push(t),t._id=null,this.nodes=c.without(this.nodes,t),this._packNodes(),this._notify(t,e)},l.prototype.removeAll=function(t){delete this._layouts,0!==this.nodes.length&&(t=void 0===t||t,this.nodes.forEach(function(t){t._id=null}),this._removedNodes=this.nodes,this.nodes=[],this._notify(this._removedNodes,t))},l.prototype.canMoveNode=function(e,t,i,o,s){if(!this.isNodeChangedPosition(e,t,i,o,s))return!1;var n=Boolean(this.nodes.find(function(t){return t.locked}));if(!this.maxRow&&!n)return!0;var a,r=new l(this.column,null,this.float,0,this.nodes.map(function(t){return t===e?a=$.extend({},t):$.extend({},t)}));if(!a)return!0;r.moveNode(a,t,i,o,s);t=!0;return n&&(t&=!Boolean(r.nodes.find(function(t){return t!==a&&Boolean(t.locked)&&Boolean(t._dirty)}))),this.maxRow&&(t&=r.getRow()<=this.maxRow),t},l.prototype.canBePlacedWithRespectToHeight=function(t){var e;return!this.maxRow||((e=new l(this.column,null,this.float,0,this.nodes.map(function(t){return $.extend({},t)}))).addNode(t),e.getRow()<=this.maxRow)},l.prototype.isNodeChangedPosition=function(t,e,i,o,s){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof s&&(s=t.height),void 0!==t.maxWidth&&(o=Math.min(o,t.maxWidth)),void 0!==t.maxHeight&&(s=Math.min(s,t.maxHeight)),void 0!==t.minWidth&&(o=Math.max(o,t.minWidth)),void 0!==t.minHeight&&(s=Math.max(s,t.minHeight)),t.x!==e||t.y!==i||t.width!==o||t.height!==s},l.prototype.moveNode=function(t,e,i,o,s,n){if(t.locked)return null;"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof s&&(s=t.height);var a=t.width!==o||t.height!==s,e={x:e,y:i,width:o,height:s,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:t.minHeight},e=this._prepareNode(e,a);return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height?null:(t._dirty=!0,t.x=t.lastTriedX=e.x,t.y=t.lastTriedY=e.y,t.width=t.lastTriedWidth=e.width,t.height=t.lastTriedHeight=e.height,this._fixCollisions(t),n||(this._packNodes(),this._notify()),t)},l.prototype.getRow=function(){return this.nodes.reduce(function(t,e){return Math.max(t,e.y+e.height)},0)},l.prototype.beginUpdate=function(t){t._updating||(t._updating=!0,this.nodes.forEach(function(t){t._packY=t.y}))},l.prototype.endUpdate=function(){var t=this.nodes.find(function(t){return t._updating});t&&(t._updating=!1,this.nodes.forEach(function(t){delete t._packY}))};var s=function(t,e){var i,s,n,a,r,d=this,t=(e=e||{},this.$el=$(t),this.el=this.$el.get(0),e.itemClass=e.itemClass||"grid-stack-item",0<this.$el.closest("."+e.itemClass).length),o=(e.row&&(e.minRow=e.maxRow=e.row,delete e.row),parseInt(this.$el.attr("data-gs-row")));this.opts=c.defaults(e,{column:parseInt(this.$el.attr("data-gs-column"))||12,minRow:o||parseInt(this.$el.attr("data-gs-min-row"))||0,maxRow:o||parseInt(this.$el.attr("data-gs-max-row"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,float:!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.$el.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:e.alwaysShowResizeHandle||!1,resizable:c.defaults(e.resizable||{},{autoHide:!e.alwaysShowResizeHandle,handles:"se"}),draggable:c.defaults(e.draggable||{},{handle:(e.handleClass?"."+e.handleClass:e.handle||"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:e.disableDrag||!1,disableResize:e.disableResize||!1,rtl:"auto",removable:!1,removableOptions:c.defaults(e.removableOptions||{},{accept:"."+e.itemClass}),removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:e.disableOneColumnMode||!1,oneColumnModeDomSort:e.oneColumnModeDomSort,ddPlugin:null}),!1===this.opts.ddPlugin?this.opts.ddPlugin=h:null===this.opts.ddPlugin&&(this.opts.ddPlugin=h.registeredPlugins[0]||h),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.$el.css("direction")),this.opts.rtl&&this.$el.addClass("grid-stack-rtl"),this.opts.isNested=t,(i="auto"===this.opts.cellHeight)?d.cellHeight(d.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.$el.addClass(this.opts._class),this._setStaticClass(),t&&this.$el.addClass("grid-stack-nested"),this._initStyles(),this.engine=new l(this.opts.column,function(t,e){e=void 0===e||e;var i=0;this.nodes.forEach(function(t){i=Math.max(i,t.y+t.height)}),t.forEach(function(t){e&&null===t._id?t.el&&$(t.el).remove():$(t.el).attr({"data-gs-x":t.x,"data-gs-y":t.y,"data-gs-width":t.width,"data-gs-height":t.height})}),d._updateStyles(i+10)},this.opts.float,this.opts.maxRow),this.opts.auto&&(s=[],(n=this).$el.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(t,e){e=$(e);var i=parseInt(e.attr("data-gs-x")),o=parseInt(e.attr("data-gs-y"));s.push({el:e.get(0),i:(Number.isNaN(i)?1e3:i)+(Number.isNaN(o)?1e3:o)*n.opts.column})}),c.sortBy(s,function(t){return t.i}).forEach(function(t){this._prepareElement(t.el)},this)),this.engine._saveInitial(),this.setAnimation(this.opts.animate),this.placeholder=$('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=c.throttle(function(){d.cellHeight(d.cellWidth(),!1)},100),this.onResizeHandler=function(){i&&d._updateHeightsOnResize(),d.oneColumnMode||(!d.opts.disableOneColumnMode&&window.innerWidth<=d.opts.minWidth?(d.oneColumnMode=!0,d.column(1)):(d.oneColumnMode=!1,d.column(d._prevColumn)))},d.opts.disableWindowResize||($(window).resize(this.onResizeHandler),this.onResizeHandler()),d.opts.staticGrid||"string"!=typeof d.opts.removable||(o=$(d.opts.removable),this.dd.isDroppable(o)||this.dd.droppable(o,d.opts.removableOptions),this.dd.on(o,"dropover",function(t,e){var e=$(e.draggable),i=e.data("_gridstack_node");i&&i._grid===d&&(e.data("inTrashZone",!0),d._setupRemovingTimeout(e))}).on(o,"dropout",function(t,e){var e=$(e.draggable),i=e.data("_gridstack_node");i&&i._grid===d&&(e.data("inTrashZone",!1),d._clearRemovingTimeout(e))})),!d.opts.staticGrid&&d.opts.acceptWidgets&&(a=null,r=function(t,e){var i=a,o=i.data("_gridstack_node"),t=d.getCellFromPixel({left:t.pageX,top:t.pageY},!0),s=Math.max(0,t.x),t=Math.max(0,t.y);o._added||(o._added=!0,o.el=i.get(0),o.autoPosition=!0,o.x=s,o.y=t,d.engine.cleanNodes(),d.engine.beginUpdate(o),d.engine.addNode(o),d.$el.append(d.placeholder),d.placeholder.attr({"data-gs-x":o.x,"data-gs-y":o.y,"data-gs-width":o.width,"data-gs-height":o.height}).show(),o.el=d.placeholder.get(0),o._beforeDragX=o.x,o._beforeDragY=o.y,d._updateContainerHeight()),d.engine.canMoveNode(o,s,t)&&(d.engine.moveNode(o,s,t),d._updateContainerHeight())},this.dd.droppable(d.$el,{accept:function(t){var e=(t=$(t)).data("_gridstack_node");return(!e||e._grid!==d)&&t.is(!0===d.opts.acceptWidgets?".grid-stack-item":d.opts.acceptWidgets)}}).on(d.$el,"dropover",function(t,e){var e=$(e.draggable),i=e.data("_gridstack_node"),o=(i&&i.width&&i.height||(0<(o=parseInt(e.attr("data-gs-width")))&&((i=i||{}).width=o),0<(o=parseInt(e.attr("data-gs-height")))&&((i=i||{}).height=o)),d.cellWidth()),s=d.cellHeight(),n=d.opts.verticalMargin,o=i&&i.width?i.width:Math.ceil(e.outerWidth()/o),s=i&&i.height?i.height:Math.round((e.outerHeight()+n)/(s+n)),n=(a=e,d.engine._prepareNode({width:o,height:s,_added:!1,_temporary:!0}));return n.isOutOfGrid=!0,e.data({_gridstack_node:n,_gridstack_node_orig:i}).on("drag",r),!1}).on(d.$el,"dropout",function(t,e){e=$(e.draggable);if(e.data("_gridstack_node")){var i=e.data("_gridstack_node");if(i.isOutOfGrid)return e.unbind("drag",r),i.el=null,d.engine.removeNode(i),d.placeholder.detach(),d._updateContainerHeight(),e.data("_gridstack_node",e.data("_gridstack_node_orig")),!1}}).on(d.$el,"drop",function(t,e){d.placeholder.detach();var i=$(e.draggable).data("_gridstack_node"),o=(i.isOutOfGrid=!1,i._grid=d,$(e.draggable).clone(!1)),s=(o.data("_gridstack_node",i),$(e.draggable).data("_gridstack_node_orig"));return void 0!==s&&void 0!==s._grid&&s._grid._triggerRemoveEvent(),$(e.helper).remove(),i.el=o.get(0),d.placeholder.hide(),c.removePositioningStyles(o),o.find("div.ui-resizable-handle").remove(),o.attr({"data-gs-x":i.x,"data-gs-y":i.y,"data-gs-width":i.width,"data-gs-height":i.height}).addClass(d.opts.itemClass).enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",r),d.$el.append(o),d._prepareElementsByNode(o,i),d._updateContainerHeight(),d.engine._addedNodes.push(i),d._triggerAddEvent(),d._triggerChangeEvent(),d.engine.endUpdate(),$(e.draggable).unbind("drag",r).removeData("_gridstack_node").removeData("_gridstack_node_orig"),d.$el.trigger("dropped",[s,i]),!1}))};s.prototype._triggerChangeEvent=function(){var t;this.engine._batchMode||((t=this.engine.getDirtyNodes(!0))&&t.length&&(this.engine._layoutsNodesChange(t),this._triggerEvent("change",t)),this.engine._saveInitial())},s.prototype._triggerAddEvent=function(){this.engine._batchMode||this.engine._addedNodes&&0<this.engine._addedNodes.length&&(this.engine._layoutsNodesChange(this.engine._addedNodes),this.engine._addedNodes.forEach(function(t){delete t._dirty}),this._triggerEvent("added",this.engine._addedNodes),this.engine._addedNodes=[])},s.prototype._triggerRemoveEvent=function(){this.engine._batchMode||this.engine._removedNodes&&0<this.engine._removedNodes.length&&(this._triggerEvent("removed",this.engine._removedNodes),this.engine._removedNodes=[])},s.prototype._triggerEvent=function(t,e){t=new CustomEvent(t,{detail:e});this.el.dispatchEvent(t)},s.prototype._initStyles=function(){this._stylesId&&c.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed();const t=this.opts.inHead?document.getElementsByTagName("head")[0]:this.el.parentNode;this._styles=c.createStylesheet(this._stylesId,t),null!==this._styles&&(this._styles._max=0)},s.prototype._updateStyles=function(t){if(null!==this._styles&&void 0!==this._styles){var e,i="."+this.opts._class+" ."+this.opts.itemClass,o=this;if(void 0===t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),this.opts.cellHeight&&!(0!==this._styles._max&&t<=this._styles._max)&&(e=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(t,e){return t&&e?"calc("+(o.opts.cellHeight*t+o.opts.cellHeightUnit)+" + "+(o.opts.verticalMargin*e+o.opts.verticalMarginUnit)+")":o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit}:function(t,e){return o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit},0===this._styles._max&&c.insertCSSRule(this._styles,i,"min-height: "+e(1,0)+";",0),t>this._styles._max)){for(var s=this._styles._max;s<t;++s)c.insertCSSRule(this._styles,i+'[data-gs-height="'+(s+1)+'"]',"height: "+e(s+1,s)+";",s),c.insertCSSRule(this._styles,i+'[data-gs-min-height="'+(s+1)+'"]',"min-height: "+e(s+1,s)+";",s),c.insertCSSRule(this._styles,i+'[data-gs-max-height="'+(s+1)+'"]',"max-height: "+e(s+1,s)+";",s),c.insertCSSRule(this._styles,i+'[data-gs-y="'+s+'"]',"top: "+e(s,s)+";",s);this._styles._max=t}}},s.prototype._updateContainerHeight=function(){var t,e,i;this.engine._batchMode||((t=this.engine.getRow())<this.opts.minRow&&(t=this.opts.minRow),0<(i=parseInt(this.$el.css("min-height")))&&(e=this.opts.verticalMargin,t<(i=Math.round((i+e)/(this.cellHeight()+e))))&&(t=i),this.$el.attr("data-gs-current-row",t),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.$el.css("height",t*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.$el.css("height","calc("+(t*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(t*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.$el.css("height",t*this.opts.cellHeight+this.opts.cellHeightUnit)))},s.prototype._setupRemovingTimeout=function(t){var e=$(t).data("_gridstack_node");!e._removeTimeout&&this.opts.removable&&(e._removeTimeout=setTimeout(function(){t.addClass("grid-stack-item-removing"),e._isAboutToRemove=!0},this.opts.removeTimeout))},s.prototype._clearRemovingTimeout=function(t){var e=$(t).data("_gridstack_node");e._removeTimeout&&(clearTimeout(e._removeTimeout),e._removeTimeout=null,t.removeClass("grid-stack-item-removing"),e._isAboutToRemove=!1)},s.prototype._prepareElementsByNode=function(r,d){var h,l,g=this,t=function(t,e){var i,o,s=Math.round(e.position.left/h),n=Math.floor((e.position.top+l/2)/l);if("drag"===t.type){var a=e.position.top-d._prevYPix;if(d._prevYPix=e.position.top,c.updateScrollPosition(r[0],e,a),r.data("inTrashZone")||s<0||s>=g.engine.column||n<0||!g.engine.float&&n>g.engine.getRow()){if(d._temporaryRemoved)return;!0===g.opts.removable&&g._setupRemovingTimeout(r),s=d._beforeDragX,n=d._beforeDragY,g.placeholder.detach(),g.placeholder.hide(),g.engine.removeNode(d),g._updateContainerHeight(),d._temporaryRemoved=!0}else g._clearRemovingTimeout(r),d._temporaryRemoved&&(g.engine.addNode(d),g.placeholder.attr({"data-gs-x":s,"data-gs-y":n,"data-gs-width":i,"data-gs-height":o}).show(),g.$el.append(g.placeholder),d.el=g.placeholder.get(0),d._temporaryRemoved=!1)}else if("resize"===t.type){if(s<0)return;i=Math.round(e.size.width/h),o=Math.round((e.size.height+g.verticalMargin())/l)}a=void 0!==i?i:d.lastTriedWidth,e=void 0!==o?o:d.lastTriedHeight;!g.engine.canMoveNode(d,s,n,i,o)||d.lastTriedX===s&&d.lastTriedY===n&&d.lastTriedWidth===a&&d.lastTriedHeight===e||(d.lastTriedX=s,d.lastTriedY=n,d.lastTriedWidth=i,d.lastTriedHeight=o,g.engine.moveNode(d,s,n,i,o),g._updateContainerHeight(),"resize"===t.type&&$(t.target).trigger("gsresize",d))},e=function(t,e){g.$el.append(g.placeholder);var i=$(this),o=(g.engine.cleanNodes(),g.engine.beginUpdate(d),h=g.cellWidth(),g.cellHeight()),e=(l=(g.$el.height()+g.verticalMargin())/parseInt(g.$el.attr("data-gs-current-row")),g.placeholder.attr({"data-gs-x":i.attr("data-gs-x"),"data-gs-y":i.attr("data-gs-y"),"data-gs-width":i.attr("data-gs-width"),"data-gs-height":i.attr("data-gs-height")}).show(),d.el=g.placeholder.get(0),d._beforeDragX=d.x,d._beforeDragY=d.y,d._prevYPix=e.position.top,d.minHeight||1),s=g.opts.verticalMargin;g.dd.resizable(r,"option","minWidth",h*(d.minWidth||1)),g.dd.resizable(r,"option","minHeight",o*e+(e-1)*s),"resizestart"===t.type&&i.find(".grid-stack-item").trigger("resizestart")},i=function(t,e){var i,o=$(this);o.data("_gridstack_node")&&(g.placeholder.detach(),d.el=o.get(0),g.placeholder.hide(),d._isAboutToRemove?(r.data("_gridstack_node")._grid._triggerRemoveEvent(),r.removeData("_gridstack_node").remove()):(g._clearRemovingTimeout(r),d._temporaryRemoved?(c.removePositioningStyles(o),o.attr({"data-gs-x":d._beforeDragX,"data-gs-y":d._beforeDragY,"data-gs-width":d.width,"data-gs-height":d.height}),d.x=d._beforeDragX,d.y=d._beforeDragY,d._temporaryRemoved=!1,g.engine.addNode(d)):(c.removePositioningStyles(o),o.attr({"data-gs-x":d.x,"data-gs-y":d.y,"data-gs-width":d.width,"data-gs-height":d.height}))),g._updateContainerHeight(),g._triggerChangeEvent(),g.engine.endUpdate(),(i=o.find(".grid-stack")).length&&"resizestop"===t.type&&(i.each(function(t,e){e.gridstack.onResizeHandler()}),o.find(".grid-stack-item").trigger("resizestop").trigger("gsresizestop")),"resizestop"===t.type)&&g.$el.trigger("gsresizestop",o)};this.dd.draggable(r,{start:e,stop:i,drag:t}).resizable(r,{start:e,stop:i,resize:t}),(d.noMove||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(r,"disable"),(d.noResize||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(r,"disable"),this._writeAttr(r,d)},s.prototype._prepareElement=function(t,e){e=void 0!==e&&e;(t=$(t)).addClass(this.opts.itemClass);var i=this._readAttr(t,{el:t.get(0),_grid:this}),i=this.engine.addNode(i,e);t.data("_gridstack_node",i),this._prepareElementsByNode(t,i)},s.prototype._writeAttr=function(t,e){e&&(t=$(t),void 0!==e.x&&t.attr("data-gs-x",e.x),void 0!==e.y&&t.attr("data-gs-y",e.y),void 0!==e.width&&t.attr("data-gs-width",e.width),void 0!==e.height&&t.attr("data-gs-height",e.height),void 0!==e.autoPosition&&t.attr("data-gs-auto-position",!!e.autoPosition||null),void 0!==e.minWidth&&t.attr("data-gs-min-width",e.minWidth),void 0!==e.maxWidth&&t.attr("data-gs-max-width",e.maxWidth),void 0!==e.minHeight&&t.attr("data-gs-min-height",e.minHeight),void 0!==e.maxHeight&&t.attr("data-gs-max-height",e.maxHeight),void 0!==e.noResize&&t.attr("data-gs-no-resize",!!e.noResize||null),void 0!==e.noMove&&t.attr("data-gs-no-move",!!e.noMove||null),void 0!==e.locked&&t.attr("data-gs-locked",!!e.locked||null),void 0!==e.resizeHandles&&t.attr("data-gs-resize-handles",e.resizeHandles),void 0!==e.id)&&t.attr("data-gs-id",e.id)},s.prototype._readAttr=function(t,e){return t=$(t),(e=e||{}).x=t.attr("data-gs-x"),e.y=t.attr("data-gs-y"),e.width=t.attr("data-gs-width"),e.height=t.attr("data-gs-height"),e.autoPosition=c.toBool(t.attr("data-gs-auto-position")),e.maxWidth=t.attr("data-gs-max-width"),e.minWidth=t.attr("data-gs-min-width"),e.maxHeight=t.attr("data-gs-max-height"),e.minHeight=t.attr("data-gs-min-height"),e.noResize=c.toBool(t.attr("data-gs-no-resize")),e.noMove=c.toBool(t.attr("data-gs-no-move")),e.locked=c.toBool(t.attr("data-gs-locked")),e.resizeHandles=t.attr("data-gs-resize-handles"),e.id=t.attr("data-gs-id"),e},s.prototype.setAnimation=function(t){t?this.$el.addClass("grid-stack-animate"):this.$el.removeClass("grid-stack-animate")},s.prototype.addWidget=function(t,e,i,o,s,n,a,r,d,h,l){return void 0!==e&&"object"!=typeof e?this.addWidget(t,{x:e,y:i,width:o,height:s,autoPosition:n,minWidth:a,maxWidth:r,minHeight:d,maxHeight:h,id:l}):(t=$(t),e&&(c.defaults(e,this._readAttr(t)),this.engine._prepareNode(e)),this._writeAttr(t,e),this.$el.append(t),this.makeWidget(t))},s.prototype.makeWidget=function(t){return t=$(t),this._prepareElement(t,!0),this._updateContainerHeight(),this._triggerAddEvent(),this._triggerChangeEvent(!0),t.get(0)},s.prototype.willItFit=function(t,e,i,o,s){return this.engine.canBePlacedWithRespectToHeight({x:t,y:e,width:i,height:o,autoPosition:s})},s.prototype.removeWidget=function(t,e){var i=(t=$(t)).data("_gridstack_node");(i=i||this.engine.getNodeDataByDOMEl(t.get(0)))&&i.el.parentElement===this.el&&(t.removeData("_gridstack_node"),this.dd.draggable(t,"destroy").resizable(t,"destroy"),this.engine.removeNode(i,e),this._triggerRemoveEvent(),this._triggerChangeEvent(!0))},s.prototype.removeAll=function(t){this.engine.nodes.forEach(function(t){t=$(t.el);t.removeData("_gridstack_node"),this.dd.draggable(t,"destroy").resizable(t,"destroy")},this),this.engine.removeAll(t),this._triggerRemoveEvent()},s.prototype.destroy=function(t){$(window).off("resize",this.onResizeHandler),!1===t?(this.removeAll(!1),this.$el.removeClass(this.opts._class),delete this.$el.get(0).gridstack):this.$el.remove(),c.removeStylesheet(this._stylesId),this.engine&&(this.engine=null)},s.prototype.resizable=function(t,o){var s=this;return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&(i.noResize=!o,i.noResize?s.dd.resizable(e,"disable"):s.dd.resizable(e,"enable"))}),this},s.prototype.movable=function(t,o){var s=this;return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&(i.noMove=!o,i.noMove?(s.dd.draggable(e,"disable"),e.removeClass("ui-draggable-handle")):(s.dd.draggable(e,"enable"),e.addClass("ui-draggable-handle")))}),this},s.prototype.enableMove=function(t,e){this.movable(this.$el.children("."+this.opts.itemClass),t),e&&(this.opts.disableDrag=!t)},s.prototype.enableResize=function(t,e){this.resizable(this.$el.children("."+this.opts.itemClass),t),e&&(this.opts.disableResize=!t)},s.prototype.disable=function(){this.movable(this.$el.children("."+this.opts.itemClass),!1),this.resizable(this.$el.children("."+this.opts.itemClass),!1),this.$el.trigger("disable")},s.prototype.enable=function(){this.movable(this.$el.children("."+this.opts.itemClass),!0),this.resizable(this.$el.children("."+this.opts.itemClass),!0),this.$el.trigger("enable")},s.prototype.locked=function(t,o){return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&(i.locked=o||!1,e.attr("data-gs-locked",i.locked?"yes":null))}),this},s.prototype.maxHeight=function(t,o){return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&!isNaN(o)&&(i.maxHeight=o||!1,e.attr("data-gs-max-height",o))}),this},s.prototype.minHeight=function(t,o){return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&!isNaN(o)&&(i.minHeight=o||!1,e.attr("data-gs-min-height",o))}),this},s.prototype.maxWidth=function(t,o){return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&!isNaN(o)&&(i.maxWidth=o||!1,e.attr("data-gs-max-width",o))}),this},s.prototype.minWidth=function(t,o){return(t=$(t)).each(function(t,e){var i=(e=$(e)).data("_gridstack_node");i&&!isNaN(o)&&(i.minWidth=o||!1,e.attr("data-gs-min-width",o))}),this},s.prototype._updateElement=function(t,e){var i=(t=$(t).first()).data("_gridstack_node"),o=this;i&&(o.engine.cleanNodes(),o.engine.beginUpdate(i),e.call(this,t,i),o._updateContainerHeight(),o._triggerChangeEvent(),o.engine.endUpdate())},s.prototype.resize=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.width,o=null!=o?o:e.height,this.engine.moveNode(e,e.x,e.y,i,o)})},s.prototype.move=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,this.engine.moveNode(e,i,o,e.width,e.height)})},s.prototype.update=function(t,i,o,s,n){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,s=null!=s?s:e.width,n=null!=n?n:e.height,this.engine.moveNode(e,i,o,s,n)})},s.prototype.compact=function(){var t;0!==this.engine.nodes.length&&(this.batchUpdate(),this.engine._sortNodes(),t=this.engine.nodes,this.engine.nodes=[],t.forEach(function(t){t.noMove||t.locked||(t.autoPosition=!0),this.engine.addNode(t,!1),t._dirty=!0},this),this.commit())},s.prototype.verticalMargin=function(t,e){if(void 0===t)return this.opts.verticalMargin;t=c.parseHeight(t);this.opts.verticalMarginUnit===t.unit&&this.opts.maxRow===t.height||(this.opts.verticalMarginUnit=t.unit,this.opts.verticalMargin=t.height,e)||this._updateStyles()},s.prototype.cellHeight=function(t,e){var i,o;if(void 0===t)return this.opts.cellHeight&&"auto"!==this.opts.cellHeight?this.opts.cellHeight:(i=(s=this.$el.children("."+this.opts.itemClass).first()).attr("data-gs-height"),o=this.opts.verticalMargin,Math.round((s.outerHeight()-(i-1)*o)/i));var s=c.parseHeight(t);this.opts.cellHeightUnit===s.unit&&this.opts.cellHeight===s.height||(this.opts.cellHeightUnit=s.unit,this.opts.cellHeight=s.height,e)||this._updateStyles()},s.prototype.cellWidth=function(){return Math.round(this.$el.outerWidth()/this.opts.column)},s.prototype.getCellFromPixel=function(t,e){var e=void 0!==e&&e?this.$el.offset():this.$el.position(),i=t.left-e.left,t=t.top-e.top,e=Math.floor(this.$el.width()/this.opts.column),o=Math.floor(this.$el.height()/parseInt(this.$el.attr("data-gs-current-row")));return{x:Math.floor(i/e),y:Math.floor(t/o)}},s.prototype.batchUpdate=function(){this.engine.batchUpdate()},s.prototype.commit=function(){this.engine.commit(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()},s.prototype.isAreaEmpty=function(t,e,i,o){return this.engine.isAreaEmpty(t,e,i,o)},s.prototype.setStatic=function(t){this.opts.staticGrid=!0===t,this.enableMove(!t),this.enableResize(!t),this._setStaticClass()},s.prototype._setStaticClass=function(){var t="grid-stack-static";!0===this.opts.staticGrid?this.$el.addClass(t):this.$el.removeClass(t)},l.prototype._layoutsNodesChange=function(t){this._layouts&&!this._ignoreLayoutsNodeChange&&this._layouts.forEach(function(o,s){o&&s!==this.column&&(s<this.column?this._layouts[s]=void 0:t.forEach(function(e){var t,i=o.find(function(t){return t._id===e._id});i&&(t=s/this.column,e.y!==e._origY&&(i.y+=e.y-e._origY),e.x!==e._origX&&(i.x=Math.round(e.x*t)),e.width!==e._origW)&&(i.width=Math.round(e.width*t))},this))},this)},l.prototype._updateNodeWidths=function(e,i,o){var s,n,t,a,r,d;this.nodes.length&&e!==i&&(s=[this.nodes.length],this.nodes.forEach(function(t,e){s[e]={x:t.x,y:t.y,width:t.width,_id:t._id}}),this._layouts=this._layouts||[],this._layouts[e]=s,1===i&&o&&o.length?(n=0,o.forEach(function(t){t.x=0,t.width=1,t.y=Math.max(t.y,n),n=t.y+t.height})):o=c.sort(this.nodes,-1,e),t=this._layouts[i]||[],a=this._layouts.length-1,0===t.length&&e<i&&i<a&&(t=this._layouts[a]||[]).length&&(e=a,t.forEach(function(e){var t=o.findIndex(function(t){return t&&t._id===e._id});-1!==t&&(o[t].x=e.x,o[t].y=e.y,o[t].width=e.width)}),t=[]),r=[],t.forEach(function(e){var t=o.findIndex(function(t){return t&&t._id===e._id});-1!==t&&(o[t].x=e.x,o[t].y=e.y,o[t].width=e.width,r.push(o[t]),o[t]=null)}),d=i/e,o.forEach(function(t){t&&(t.x=1===i?0:Math.round(t.x*d),t.width=1!==i&&1!==e&&Math.round(t.width*d)||1,r.push(t))}),r=c.sort(r,-1,i),this._ignoreLayoutsNodeChange=!0,this.batchUpdate(),this.nodes=[],r.forEach(function(t){this.addNode(t,!1),t._dirty=!0},this),this.commit(),delete this._ignoreLayoutsNodeChange)},l.prototype._saveInitial=function(){this.nodes.forEach(function(t){t._origX=t.x,t._origY=t.y,t._origW=t.width,t._origH=t.height,delete t._dirty})},s.prototype.column=function(t,e){if(void 0===t)return this.opts.column;var i,o;this.opts.column!==t&&(i=this.opts.column,1===t?this._prevColumn=i:delete this._prevColumn,this.$el.removeClass("grid-stack-"+i).addClass("grid-stack-"+t),this.opts.column=this.engine.column=t,!0!==e)&&(this.opts.oneColumnModeDomSort&&1===t&&(o=[],this.$el.children("."+this.opts.itemClass).each(function(t,e){e=$(e).data("_gridstack_node");e&&o.push(e)}),o.length||(o=void 0)),this.engine._updateNodeWidths(i,t,o),this.engine._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this.engine._ignoreLayoutsNodeChange)},s.prototype.float=function(t){if(void 0===t)return this.opts.float||!1;this.opts.float===t||(this.opts.float=this.engine.float=t||!1,t)||(this.engine._packNodes(),this.engine._notify(),this._triggerChangeEvent())},s.prototype.getRow=function(){return this.engine.getRow()},s.prototype.on=function(t,e){-1!==t.indexOf(" ")?t.split(" ").forEach(function(t){this.on(t,e)},this):"change"===t||"added"===t||"removed"===t?(this._gsEventHandler=this._gsEventHandler||{},this._gsEventHandler[t]=function(t){e(t,t.detail)},this.el.addEventListener(t,this._gsEventHandler[t])):this.$el.on(t,e)},s.prototype.off=function(t,e){-1!==t.indexOf(" ")?t.split(" ").forEach(function(t){this.off(t,e)},this):"change"===t||"added"===t||"removed"===t?this._gsEventHandler&&this._gsEventHandler[t]&&(this.el.removeEventListener(t,this._gsEventHandler[t]),delete this._gsEventHandler[t]):this.$el.off(t)},t.GridStack=s,t.GridStack.Utils=c,t.GridStack.Engine=l,t.GridStack.DragDropPlugin=h,s.init=function(t,e){e=$(e=e||".grid-stack").get(0);if(e)return e.gridstack||(e.gridstack=new s(e,c.clone(t))),e.gridstack},s.initAll=function(i,t){var o=[];return $(t=t||".grid-stack").each(function(t,e){e.gridstack||(e.gridstack=new s(e,c.clone(i))),o.push(e.gridstack)}),o},t.GridStack}(jQuery,window);