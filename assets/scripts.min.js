((n,i)=>{"use strict";class a{constructor(t,i,e){if(0<i.length){const s=[];for(let e=i.length-1;-1<e;--e){let t=this.decodeEntities(i[e]);""!==t&&s.push(t)}0<s.length&&(this.el=t,this.options=Object.assign({highlightSpeed:20,typeSpeed:100,clearDelay:500,typeDelay:200,interval:2e3,dir:"rtl"},e),this.last=0,this.run(s),0<this.options.highlightSpeed)&&(this.intervalHandle=setInterval(()=>{requestAnimationFrame(()=>{this.run(s)})},this.options.interval))}}run(t){if(!0!==this.typing)if(this.el&&this.el.isConnected){const e=this.el.textContent.trim();this.typing=!0,this.text=t[this.last],this.highlight(e.length,"",null),this.last=this.last<t.length-1?this.last+1:0}else this.destroy()}destroy(){clearInterval(this.intervalHandle),this.el=null,this.clearData()}clearData(){this.text=this.typing=null}highlight(t,e,i){if((i=null===i?t+1:i)<=0)setTimeout(()=>{requestAnimationFrame(()=>{this.clearText(e)})},this.options.clearDelay);else{const s=this.el.textContent.trim(),n="ltr"===this.options.dir,a=n?"":s.substring(0,i-1),l=n?s.substring(0,t-i+1):s.substring(i-1,t+1),r=n?s.substring(t-i+1):s.substring(t+1);""===a&&""===l&&""===r&&(this.el.style.display="none"),this.el.innerHTML=a+"<span>"+l+"</span>"+r,--i,setTimeout(()=>{requestAnimationFrame(()=>{this.highlight(t,e,i)})},this.options.highlightSpeed)}}type(t){if(this.text&&0!==this.text.length){const e=t+this.text[0];1===(this.el.innerHTML=e).length&&(this.el.display=""),t+=this.text[0],this.text=this.text.substring(1),setTimeout(()=>{requestAnimationFrame(()=>{this.type(t)})},this.options.typeSpeed)}else this.clearData()}clearText(t){const e=this.el.tfTag("span")[0];e&&e.remove(),setTimeout(()=>{requestAnimationFrame(()=>{this.type(t)})},this.options.typeDelay)}decodeEntities(t){const e=i.createElement("textarea");return e.innerHTML=t,(t=e.value)||""}}n.on("builder_load_module_partial",(t,e)=>{if(!0!==e||t.classList.contains("module-typewriter")){const i=n.selectWithParent("typewriter-span",t);for(let e=i.length-1;-1<e;--e){let t=i[e];if(n.is_builder_active&&"undefined"!=typeof tb_app&&null!==tb_app.activeModel){const s=ThemifyConstructor.getStyleVal("span_background_color");s&&tb_app.liveStylingInstance.setLiveStyle("background-color",s,ThemifyStyles.getStyleOptions("typewriter").span_background_color.selector)}try{new a(t,JSON.parse(t.dataset.typerTargets),{highlightSpeed:parseInt(t.dataset.typerHighlightSpeed),typeSpeed:parseInt(t.dataset.typerTypeSpeed),clearDelay:parseInt(1e3*parseFloat(t.dataset.typerClearDelay)),typeDelay:parseInt(1e3*parseFloat(t.dataset.typerTypeDelay)),interval:parseInt(1e3*parseFloat(t.dataset.typerInterval)),dir:t.dataset.typerDirection})}catch(t){}}}})})(Themify,document);