((l,d)=>{"use strict";let n=l.w,t=".grid-stack div.grid-stack-item{position:absolute;left:0;top:0;padding:0}.grid-stack.grid-stack-1{width:auto;margin-left:0;height:auto!important}.grid-stack.grid-stack-1 .builder_mosaic_item.grid-stack-item{position:relative;top:0;left:0;width:auto;margin-bottom:20px}";const r=!0===l.is_builder_active,s=d.createElement("style"),o={},a=8.333,c=".grid-stack .grid-stack-item",g=tbLocalScript.addons.mosaic,m=g.url+"modules/",f={float:!0,verticalMargin:0,disableDrag:!0,disableWindowResize:!0,disableResize:!0,ddPlugin:!1,animate:!1,inHead:!0===l.is_builder_active,rtl:l.isRTL},h=(i,e)=>{if(void 0===o["l"+i]){o["l"+i]=!0;let t=i*a;i%3==0&&(t=Math.round(t)),s.textContent+=c+'[data-gs-x="'+i+'"]{left:'+t+"%}"}if(void 0===o["w"+e]){o["w"+e]=!0;let t=0==e?a:e*a;e%3==0&&(t=Math.round(t)),s.textContent+=c+'[data-gs-width="'+e+'"]{width:'+t+"%}"}},p=t=>{const i=l.selectWithParent("tpgs-wrap",t);for(let t=i.length-1;-1<t;--t)if(!i[t].classList.contains("grid-stack-done")){f.cellHeight=parseFloat(i[t].dataset.cellHeight),f.minWidth=parseFloat(i[t].dataset.minWidth);let a=GridStack.init(f,i[t]),d=l.convert(i[t].tfClass("builder_mosaic_item")).reverse();f.minWidth>=n&&i[t].classList.add("grid-stack-1");for(let s=d.length-1;-1<s;--s){let t=d[s].dataset.gsX,i=d[s].dataset.gsWidth,e=d[s].dataset.hover;e&&!0!==o["ef"+e]&&(o["ef"+e]=!0,l.loadCss(m+"effects/"+e,null,g.ver)),f.minWidth<n&&h(t,i),a.addWidget(d[s],{x:t,y:d[s].dataset.gsY,width:i,height:d[s].dataset.gsHeight}),!1==r&&(d[s].style.visibility="visible",d[s].style.animationDelay=200*s+"ms",d[s].classList.add("animated",d[s].dataset.effect))}i[t].classList.add("grid-stack-done"),(t=>{const i=t.closest(".tf_swiper-container");if(i&&!i.classList.contains("tf_swiper-container-initialized"))l.carousel(i)})(i[t])}};s.id="tb_mosaic_css",l.isRTL&&(t+=".grid-stack-rtl{direction:ltr}.grid-stack-rtl .grid-stack-item{direction:rtr}"),!0==r&&(t+=".themify_builder_active .builder_mosaic_item{visibility:visible}"),s.textContent=t,d.head.appendChild(s),t=null,l.on("builder_load_module_partial",(t,i)=>{if(!0!==i||t.classList.contains("module-mosaic")){const e=[],s=t||d;s.tfClass("product")[0]&&e.push(l.loadCss(m+"product","tbm_products",g.ver)),e.push(l.animateCss()),e.push(l.loadJs(g.url+"gridstack","undefined"!=typeof GridStack,g.ver)),Promise.all(e).then(()=>{p(t),!1==r&&l.requestIdleCallback(()=>{(t=>{const i=t.tfClass("tbm_wrap_more")[0];if(i){l.loadCss(m+"infinite","tbm_infinity",g.ver);const e=i.previousElementSibling,s=e.parentNode.classList.contains("pagination-load-more");e.tfOn("infiniteloaded",function(t){let i=this;while(1){if(!i.nextElementSibling||!i.nextElementSibling.classList.contains("tpgs-wrap"))break;i=i.nextElementSibling}const e=this.cloneNode(!1),s=d.createDocumentFragment(),a=t.detail.items;e.classList.remove(this.gridstack.opts._class,"grid-stack-done"),e.removeAttribute("data-gs-current-row");for(let t=0,i=a.length;t<i;++t)s.appendChild(a[t]);e.appendChild(s),p(e),i.parentNode.insertBefore(e,i.nextSibling)},{passive:!0}),s&&i.classList.remove("tf_hidden"),l.infinity(e,{scrollThreshold:!s,history:!1})}})(t)},100)})}}).on("tfsmartresize",t=>{if(t){n=t.w;const s=d.tfClass("grid-stack-done");for(let e=s.length-1;-1<e;--e)if(s[e].gridstack)if(s[e].dataset.minWidth>=n)s[e].classList.add("grid-stack-1");else{for(let t=s[e].tfClass("grid-stack-item"),i=t.length-1;-1<i;--i)h(t[i].dataset.gsX,t[i].dataset.gsWidth);s[e].classList.remove("grid-stack-1")}}})})(Themify,document);