((s,n,i)=>{"use strict";n.on("tb_editing_tile_setting",a=>{let l;const _=(t,e)=>{"visual"===s.mode&&(e=(e=e||s.liveStylingInstance.el)&&e.tfClass("module-tile")[0])&&(e.classList.remove("bt_stop_flip"),n.trigger("builder_tiles_flip",[e,t]),e.classList.add("bt_stop_flip"),l=t)};if("visual"===s.mode){const t=t=>{l&&_(l,t)};n.on("builder_load_module_partial",t).on("themify_builder_lightbox_close",()=>{n.off("builder_load_module_partial",t);for(let t=i.tfClass("bt_stop_flip"),e=t.length-1;-1<e;--e)t[e].classList.remove("bt_stop_flip")})}setTimeout(()=>{const s=a.querySelectorAll(".tb_tiles_nav>.tb_tabs>.tb_tab_nav a"),i=n.click,e=a.querySelectorAll("#type_front,#type_back"),o=t=>{const e=t.target?t.target.closest("a"):t;if(e){const l=e.closest(".tb_tab").tfClass("tb_tile_options"),s=e.id;for(let t=l.length-1;-1<t;--t)l[t].style.display=l[t].classList.contains("tb_tile_options_"+s)&&!l[t].classList.contains("_tf-hide")?"":"none"}};for(let l=s.length-1;-1<l;--l){let t=s[l].getAttribute("data-id"),e=a.querySelector("#"+t);e&&e.tfOn("tb_builder_tabsactive",t=>{const e=t.currentTarget.querySelector("#type_front,#type_back");if(e){const l=e.id.replace("type_","");_(l),e.tfOff(i,o,{passive:!0}).tfOn(i,o,{passive:!0}),o(e.tfClass("selected")[0])}},{passive:!0})}for(let t=e.length-1;-1<t;--t)o(e[t].tfClass("selected")[0]);e[0]&&e[0].tfOn(i,o,{passive:!0})},1e3)}),"visual"===s.mode&&n.on("tb_module_sort",t=>{t.classList.contains("module-tile")&&n.trigger("builder_load_module_partial",[[t]])})})(tb_app,Themify,document);